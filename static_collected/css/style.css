/* =========================================================
   Travel Companion - style.css (layout 건드리지 않음)
   - 색/간격 토큰
   - 버튼/입력/카드/테이블/코드블록
   - 다크모드: OS 자동 + data-theme="dark" 수동 토글 지원
   - Tailwind 유틸을 덮는 최소한의 다크 오버라이드 포함
   ========================================================= */

/* ---------- Tokens ---------- */
:root {
  --bg: #f8fafc;
  --surface: #ffffff;
  --text: #0f172a;
  --muted: #64748b;
  --border: #e5e7eb;
  --border-strong: #d1d5db;
  --brand: #6366f1;     /* indigo */
  --brand-2: #0ea5e9;   /* sky */
  --ring: rgba(99,102,241,.35);

  --radius: 14px;
  --radius-sm: 10px;
  --shadow-sm: 0 1px 2px rgba(2,6,23,.06);
  --shadow-md: 0 8px 24px rgba(2,6,23,.08);

  --gap: 16px;
  --pad: 16px;

  /* 헤더 그라데이션 (다크에서 교체) */
  --header-from: #0ea5e9;
  --header-to:   #6366f1;
}

/* OS 다크 기본값 (사용자 저장값이 없을 때) */
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0b1220;
    --surface: #0f172a;
    --text: #e5e7eb;
    --muted: #94a3b8;
    --border: #1f2937;
    --border-strong: #334155;
    --ring: rgba(14,165,233,.35);

    --header-from: #0b1220;
    --header-to:   #1f2937;
  }
}

/* 수동 다크모드 (html[data-theme="dark"]) */
[data-theme="dark"] {
  --bg: #0b1220;
  --surface: #0f172a;
  --text: #e5e7eb;
  --muted: #94a3b8;
  --border: #1f2937;
  --border-strong: #334155;
  --ring: rgba(14,165,233,.35);

  --header-from: #0b1220;
  --header-to:   #1f2937;
}

/* ---------- Base (레이아웃은 Tailwind에 맡김) ---------- */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  background: var(--bg);
  color: var(--text);
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}
::selection { background: rgba(99,102,241,.18); }
img { max-width: 100%; display: block; }
a { color: var(--brand); text-decoration: none; }
a:hover { text-decoration: underline; }

/* 헤더 배경만 변수로 오버라이드 (레이아웃 클래스는 유지) */
.tg-header {
  background: linear-gradient(90deg, var(--header-from), var(--header-to)) !important;
}

/* 본문 기본 여백(기존 Tailwind와 충돌 없음) */
main { padding: 20px; }

/* ---------- Controls (입력/버튼) ---------- */
.input,
input[type="text"], input[type="number"], input[type="email"], input[type="url"],
select, textarea {
  width: 100%;
  background: var(--surface);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 10px 12px;
  transition: border-color .2s ease, box-shadow .2s ease, background .2s ease, color .2s ease;
}
.input::placeholder, textarea::placeholder { color: var(--muted); }
.input:focus, input:focus, select:focus, textarea:focus {
  border-color: var(--brand);
  box-shadow: 0 0 0 4px var(--ring);
  outline: none;
}

/* 버튼: 전역 button은 건드리지 않고 클래스형만 */
.btn, .btn-primary, .btn-secondary {
  display: inline-flex; align-items: center; justify-content: center;
  padding: 10px 16px; border: 1px solid transparent; border-radius: var(--radius-sm);
  box-shadow: var(--shadow-sm); font-weight: 600; cursor: pointer;
  transition: transform .06s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease, opacity .2s ease;
}
.btn-primary { background: linear-gradient(135deg, var(--brand-2), var(--brand)); color: #fff; }
.btn-secondary { background: #fff; color: var(--brand); border-color: var(--border-strong); }
.btn:hover, .btn-primary:hover, .btn-secondary:hover { transform: translateY(-1px); box-shadow: var(--shadow-md); }
.btn:disabled, .btn-primary:disabled, .btn-secondary:disabled { opacity: .6; cursor: not-allowed; transform: none; box-shadow: none; }
:focus-visible { outline: 3px solid var(--ring); outline-offset: 2px; border-radius: calc(var(--radius-sm) + 2px); }

/* ---------- Alerts ---------- */
.error {
  background: #fee2e2; border: 1px solid #ef4444;
  padding: 12px; border-radius: var(--radius-sm); margin-top: 10px; color: #991b1b;
}
@media (prefers-color-scheme: dark) {
  .error { background: rgba(239,68,68,.1); border-color: rgba(239,68,68,.6); color: #fecaca; }
}

/* ---------- Card ---------- */
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: var(--pad);
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
}
.card:hover { box-shadow: var(--shadow-md); }
.card + .card { margin-top: var(--gap); }

/* ---------- Grid ---------- */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: var(--gap);
  align-items: stretch;
}
.grid .card img {
  width: 100%; height: 160px; object-fit: cover; border-radius: 10px;
}

/* ---------- Table ---------- */
table {
  width: 100%;
  border-collapse: separate; border-spacing: 0; margin-top: 12px;
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius); overflow: hidden; box-shadow: var(--shadow-sm);
}
th, td { padding: 12px 12px; border-bottom: 1px solid var(--border); text-align: left; }
th { background: #f8fafc; color: #0f172a; font-weight: 700; }
tr:last-child td { border-bottom: 0; }
tbody tr:hover { background: rgba(2,6,23,.03); }
@media (prefers-color-scheme: dark) {
  th { background: #0b1220; color: #e5e7eb; }
  tbody tr:hover { background: rgba(255,255,255,.03); }
}

/* ---------- Code Block ---------- */
.codeblock, pre code, pre {
  background: #0f172a; color: #e5e7eb; border: 1px solid #0b1220;
  padding: 14px; border-radius: var(--radius); overflow: auto;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  font-size: .9rem; line-height: 1.5;
}

/* ---------- Utilities ---------- */
.muted { color: var(--muted); font-size: .92em; }
.container { max-width: 1200px; margin: 0 auto; padding: 0 16px; }
.divider { height: 1px; background: var(--border); margin: 16px 0; }

/* =========================================================
   Dark mode overrides for Tailwind utilities
   (마크업 변경 없이 다크 배경/글자/보더를 강제로 반영)
   ========================================================= */
[data-theme="dark"] body {
  background: var(--bg) !important;       /* 페이지 배경 */
  color: var(--text) !important;
}

/* 카드/패널이 bg-white 인 경우 다크 톤으로 */
[data-theme="dark"] .bg-white { background-color: var(--surface) !important; }

/* 자주 쓰는 글자색 유틸 보정 */
[data-theme="dark"] .text-slate-900 { color: var(--text) !important; }
[data-theme="dark"] .text-slate-700 { color: #cbd5e1 !important; }
[data-theme="dark"] .text-slate-500 { color: #94a3b8 !important; }

/* 보더/디바이더 보정 */
[data-theme="dark"] .border,
[data-theme="dark"] .border-b,
[data-theme="dark"] .divide-y > * { border-color: var(--border-strong) !important; }

/* 그림자 살짝 진하게 */
[data-theme="dark"] .shadow,
[data-theme="dark"] .shadow-xl,
[data-theme="dark"] .shadow-2xl { box-shadow: 0 10px 28px rgba(0,0,0,.45) !important; }

/* 헤더 그라데이션도 변수 기반으로 */
.tg-header { background: linear-gradient(90deg, var(--header-from), var(--header-to)) !important; }

/* 로딩 카드: 라이트/다크 공통으로 또렷하게 */
.loader-card{
  background: var(--surface);
  color: var(--text);
  border: 1px solid var(--border);
}

/* ===== FullCalendar: 잘림 방지 & 가독성 보정 ===== */

/* 시간 슬롯을 살짝 키워서 세로 여유 확보(필요시 값 조절) */
.fc .fc-timegrid-slot { height: 2.8rem; }   /* 기본 ~48px → 약간 더 큼 */

/* 이벤트 카드 여백/모서리 */
.fc .fc-timegrid-event {
  border: 0;
  border-radius: 10px;
  overflow: hidden;
}
.fc .fc-timegrid-event .fc-event-main { padding: 4px 6px; }

/* 시간/제목 텍스트: 줄바꿈 허용 + 라인 높이 조정 + 폰트 조금 줄임 */
.fc .fc-timegrid-event .fc-event-time,
.fc .fc-timegrid-event .fc-event-title {
  white-space: normal;
  word-break: keep-all;        /* 단어 단위 줄바꿈(한글도 자연스러움) */
  overflow-wrap: anywhere;     /* 너무 좁을 때 아무데서나 줄바꿈 허용 */
  line-height: 1.2;
  font-size: 12px;
}

/* 제목은 최대 3줄까지만 보여주고 말끔하게 클램프 */
.fc .fc-timegrid-event .fc-event-title {
  margin-top: 2px;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3;       /* 보이는 줄 수(2~3 선호) */
  overflow: hidden;
}

/* 월(month) 뷰/일(day) 뷰에서도 줄바꿈 허용 */
.fc .fc-daygrid-event .fc-event-title,
.fc .fc-list-event .fc-list-event-title {
  white-space: normal;
  word-break: keep-all;
  overflow-wrap: anywhere;
  line-height: 1.2;
}
